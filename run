<?php 

declare(strict_types=1);

require __DIR__ . '/vendor/autoload.php';

use \Chuck\Config;
use \Chuck\Cli\Runner;

$ds = DIRECTORY_SEPARATOR;
$configFile = getenv('CHUCKCONFIG');
$config = [
    'app' => 'chuck',
    'path.root' => __DIR__ . $ds . 'tests' . $ds . 'Fixtures',
];

if ($configFile && realpath($configFile)) {
    if (str_starts_with(realpath($configFile), __DIR__)) {
        $config = require $configFile;
    }
}

exit(Runner::run(new Config($config)));

// vim: ft=php
