<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Contributing - Chuck Framework</title>

    <link rel="shortcut icon" href="../logo.svg">
    <link rel="mask-icon" href="../logo.svg" color="#000000">

    <link rel="stylesheet" href="../styles.css">



    <script src="../highlight.min.js"></script>
    <script>hljs.highlightAll();</script>





    <script src="../search/main.js"></script>

</head>

<body>
    <header class="mobile">
        <div class="logo">
            <a href="https://conia.dev">
                <img src="../logo.svg" alt="Contributing - Chuck Framework Logo">
            </a>
            Chuck
        </div>
        <div class="toc-link">
            <a href="#navigation">Jump to table of contents</a>
        </div>
    </header>
    <main>
        <aside id="navigation" class="pane">
            <div class="logo">
                <a href="https://conia.dev">
                    <img src="../logo.svg" alt="Contributing - Chuck Framework Logo">
                </a>
                Chuck
            </div>

            <div class="title">Table of Contents</div>

            <ul>
            
                <!--

-->

<li >
    <a href="..">Introduction</a>
</li>

            
            </ul>

            <div class="title">Quick Search</div>

            <div role="search">
                <form action="../search.html" method="get">
                <input type="search" name="q" placeholder="Search docs" />
                </form>
            </div>
        </aside>

        <article>
            <div>
            
                <h1 id="contributing">Contributing</h1>
<h2 id="style-guide">Style Guide</h2>
<p>All pull requests must adhere to the
<a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-12-extended-coding-style-guide.md">PSR-12 standard</a>.</p>
<h2 id="unit-testing">Unit Testing</h2>
<p>All pull requests must be accompanied by passing unit tests, complete code coverage and
static analysis running without errors.
Chuck uses <strong>Pest</strong> for testing and <strong>Psalm</strong> as static analyzer.</p>
<ul>
<li>(<a href="https://pestphp.com/">Learn more about Pest</a></li>
<li>(<a href="https://psalm.dev/">Learn more about Psalm</a></li>
</ul>
<p>Run the test suit with <code>./vendor/bin/pest</code> or <code>./vendor/bin/pest --coverage</code>.</p>
<h3 id="test-suite-requirements">Test suite requirements</h3>
<ul>
<li>Install PHP 8.1+ with the required extensions (see a Ubuntu example below)</li>
<li>PostgreSQL and MySQL/MariaDB for full coverage.</li>
<li>Composer (https://getcomposer.org/download/)</li>
<li>Clone this repository</li>
<li>Then <code>composer install</code></li>
</ul>
<p>Ubuntu 22.04 LTS example:</p>
<pre><code>apt install php8.1-cli php8.1-sqlite3 php8.1-pgsql php8.1-mysql \
    php8.1-gd php8.1-pcov php8.1-curl php8.1-xml php8.1-zip
</code></pre>
<p>The database servers:</p>
<pre><code>apt install mariadb-server postgresql sqlite3
</code></pre>
<h3 id="coverage">Coverage</h3>
<p>Coverage relies on the PHP extension <code>pcov</code>.</p>
<p>Note: Full coverage may only be reported if all three supported PDO drivers are installed
which are sqlite, pgsql and mysql, and all test databases are set up. See next section.</p>
<h3 id="create-test-databases">Create test databases:</h3>
<p>SQLite will be created automatically in the system's temp directory.</p>
<p>PostgreSQL:</p>
<pre><code>    CREATE DATABASE chuck_test_db;
    CREATE ROLE chuck_test_user LOGIN PASSWORD 'chuck_test_password';
    GRANT ALL PRIVILEGES ON DATABASE chuck_test_db TO chuck_test_user;
</code></pre>
<p>MariaDB/MySQL</p>
<pre><code>    CREATE DATABASE chuck_test_db;
    CREATE USER chuck_test_user@localhost IDENTIFIED BY 'chuck_test_password';
    GRANT ALL ON chuck_test_db.* TO chuck_test_user@localhost;
</code></pre>
<p>These default credentials can be overwritten using the following environment variables:</p>
<pre><code>DB_HOST
DB_NAME
DB_USER
DB_PASSWORD
</code></pre>
<h3 id="temporary-files">Temporary files</h3>
<p>Running the test suite will create some temporary files. We try to clean them up, but in
case of failing tests they might remain in the file system:</p>
<ul>
<li>TODO: list them</li>
</ul>
<h2 id="static-analysis">Static analysis</h2>
<p>Chuck uses Psalm as static analyzer. Currently set to level 1 and <code>reportMixedIssues="false"</code></p>
<p>Run:</p>
<pre><code>./vendor/bin/psalm --no-cache
</code></pre>
<h3 id="psalm-and-suppressing-readonly-property-errors">Psalm and suppressing readonly property errors</h3>
<p>At the time of writing Psalm does not support readonly properties which
are not initialized in the constructor. The maintainers suggest to
suppress errors is the only appropriate way. Recheck on occasion. Possible Errors:</p>
<ul>
<li>InaccessibleProperty</li>
<li>MissingConstructor</li>
<li>RedundantPropertyInitializationCheck</li>
<li>See: https://github.com/vimeo/psalm/issues/7608</li>
</ul>
            
            </div>
        </article>

        <aside class="toc desktop">
            <!-- github repo URL -->
            
                <a href="https://github.com/coniadev/chuck/edit/master/docs/contributing.md" class="github-link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
                    Edit on GitHub
                </a>
            

            <div class="title">This Page</div>

            <ul>
            
                <li><a href="#contributing">Contributing</a></li>
                
                    <li>
                        <a href="#style-guide">Style Guide</a>
                        
                    </li>
                
                    <li>
                        <a href="#unit-testing">Unit Testing</a>
                        
                            <ul>
                                
                                <li>
                                    <a href="#test-suite-requirements">Test suite requirements</a>
                                </li>
                                
                                <li>
                                    <a href="#coverage">Coverage</a>
                                </li>
                                
                                <li>
                                    <a href="#create-test-databases">Create test databases:</a>
                                </li>
                                
                                <li>
                                    <a href="#temporary-files">Temporary files</a>
                                </li>
                                
                            </ul>
                        
                    </li>
                
                    <li>
                        <a href="#static-analysis">Static analysis</a>
                        
                            <ul>
                                
                                <li>
                                    <a href="#psalm-and-suppressing-readonly-property-errors">Psalm and suppressing readonly property errors</a>
                                </li>
                                
                            </ul>
                        
                    </li>
                
            
            </ul>

            <div class="title">Navigate</div>

        
        </aside>
    </main>

    <footer>
        © 2022 ebene fünf GmbH |
        Built with <a href="https://www.mkdocs.org">MkDocs</a>.
    </footer>

  <!--
  MkDocs version      : 1.5.2
  Docs Build Date UTC : 2023-09-09 13:59:06.136270+00:00
  -->
</body>
</html>